<div class="row">
	<div class="md-col-8">
		<div>
			<h3>Event Data for Application: Blocipedia</h3>
			<div>
				<h4>
				<br />
					<span>
						<%= Time.now.strftime('%b %Y') %>
					</span>
						 <!--%= form_for @referers, html: {class: 'form-inline'} do |f| %-->
							<!--div class="form-group"-->
								<!--%= f.label :referers, class: 'sr-only' %-->
								<!--%= f.text_field :referers, class: 'form-control' %><br /-->
							<!--/div-->
						<!--% end %-->
					<span>
						
					</span>
				</h4>
				<br />
					<div>
						<select name="user_id">
							<%= @referers.each do |referer| %>
								<option value="<%= referer[1] %>"><%= referer[0] %></option>
							<% end %>
						</select>
					</div>
				<br />
				<%= content_tag 'canvas', '', id: 'first_chart', height: '350', width: '500' %>
				<%= content_tag 'canvas', '', id: 'events_chart', height: '450', width: '500' %>

				<script>
					var dataFirstChart = {
						labels : ["January","February","March","April","May","June","July"],
						datasets : [
							{
								fillColor : "rgba(220,220,220,0.5)",
								strokeColor : "rgba(220,220,220,1)",
								pointColor : "rgba(220,220,220,1)",
								pointStrokeColor : "#fff",
								data : [65,59,90,81,56,55,40]
							},
							{
								fillColor : "rgba(151,187,205,0.5)",
								strokeColor : "rgba(151,187,205,1)",
								pointColor : "rgba(151,187,205,1)",
								pointStrokeColor : "#fff",
								data : [28,48,40,19,96,27,100]
							}
						]
					}

				var ctxFirstChart = $("#first_chart").get(0).getContext("2d");
				var firstChartline = new Chart(ctxFirstChart).Line(dataFirstChart);
	

				</script>
				<script>
					<% events_labels = [] %>
					<% Event.all.each do |event| %>
						<% if event.name != nil %>
							<% events_labels << "#{event.name}" %>
						<% end %>
					<% end %>
					var dataEvents = {
						labels : <%= raw(events_labels.uniq) %>,
					datasets : [
							<% for i in 1..Event.count - 85 %>
								<%= raw("
									{
										fillColor : 'rgba(151,187,205,0.5)',
										strokeColor : 'rgba(151,187,205,1)',
										pointColor : 'rgba(151,187,205,1)',
										pointStrokeColor : '#fff',
										data : [ #{Event.find(i).property_1}, #{Event.find(i).property_2} ]
									},")
								%>	
							<% end %>
							<%= raw("
								{
									fillColor : 'rgba(151,187,205,0.5)',
									strokeColor : 'rgba(151,187,205,1)',
									pointColor : 'rgba(151,187,205,1)',
									pointStrokeColor : '#fff',
									data : [ #{Event.last.property_1}, #{Event.last.property_2} ]
								}")
							%>
						]
					}
				var ctxEventsChart = $("#events_chart").get(0).getContext("2d");
				var eventChartLine = new Chart(ctxEventsChart).Bar(dataEvents);
				</script>
			</div>
		</div>
	</div>
</div>
